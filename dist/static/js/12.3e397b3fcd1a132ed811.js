webpackJsonp([12],{SyWN:function(e,t){},"iMe/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"basetable",data:function(){return{url:"",cur_page:1,filter_page:1,apiUrl:domain.apiUrl,apiImgUrl:domain.apiImgUrl,select_word:"",del_list:[],flagVisible:!1,modifyVisible:!1,delVisible:!1,dialogImageUrl:"",dialogVisible:!1,content:"",form:{},loading:!0,totalNum:0,pageSize:100,currentId:0,deleteIdArr:[],imageUrl:"",imgList:[]}},created:function(){this.getData()},components:{},watch:{$route:function(e){"/avatar"==e.path&&this.getData()}},computed:{data:function(){return this.tableData}},methods:{beforeAvatarUpload:function(e){console.log(e);var t="image/jpeg"===e.type,a="image/png"===e.type,i="image/bmp"===e.type,n=e.size/1024/1024<2;return t||a||i||this.$message.error("头像图片只支持jpg,png,bmp格式哦!"),n||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&n},handleCurrentChange:function(e){this.cur_page=e,this.select_page=e,""==this.select_word&&""==this.select_cate||(this.filter_page=e),this.filterDate()},selectChangeByPage:function(e){var t=this;this.url=this.apiUrl+"",this.$axios.get(this.url).then(function(e){console.log(e),t.tableData=e.data.data.list,t.totalNum=e.data.data.totalElements})},getData:function(){var e=this;this.imgList=[],this.url=this.apiUrl+"/client/api/nicknameAndHeadImg/findPage?nickName=false",this.$axios.get(this.url).then(function(t){console.log(t);for(var a=t.data.content,i=0;i<a.length;i++)e.imgList.push({url:e.apiImgUrl+a[i].headImg,id:a[i].id});e.loading=!1,e.totalNum=t.data.totalElements})},handleRemove:function(e,t){var a=this;this.imgList=t,console.log(e,t),this.$axios({method:"post",url:this.apiUrl+"/client/api/nicknameAndHeadImg/deleteById",data:{id:e.id,_method:"delete"},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}]}).then(function(e){a.$message.success("删除成功")})},handlePictureCardPreview:function(e){console.log(e)},handleSizeChange:function(e){this.pageSize=e,this.filterDate()},uploadAvatar:function(e){var t=this,a=new FormData;a.append("file",e.file),this.$axios.post(this.apiUrl+"/client/api/file/upload",a).then(function(e){200==e.status&&(console.log(e),t.$axios.post(t.apiUrl+"/client/api/nicknameAndHeadImg/add?headImg="+e.data.data).then(function(e){200==e.status&&t.$message.success("上传成功")}))})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-tickets"}),e._v("  头像管理")])],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"}),e._v(" "),a("el-upload",{attrs:{action:"","list-type":"picture-card","auto-upload":!0,multiple:"","file-list":e.imgList,"on-preview":e.handlePictureCardPreview,"before-upload":e.beforeAvatarUpload,"http-request":e.uploadAvatar,"on-remove":e.handleRemove}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.cur_page,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum,align:"center","page-sizes":[100]},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)])},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("SyWN")},"data-v-27cf8664",null);t.default=s.exports}});